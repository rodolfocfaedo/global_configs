> Contexto fixo (j√° resolvido e fora deste guia):
> 
> - Windows user: **rodol**
> - Linux (WSL) user: **rodolfo**
> - WSL, Java e PostgreSQL **j√° instalados e funcionando**
> - Vari√°veis globais (`DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASSWORD`) **j√° configuradas**

Este documento existe para **uma √∫nica fun√ß√£o**:

üëâ explicar **exatamente o que muda de um projeto Spring Boot para outro**, e **s√≥ isso**.

Nada aqui √© setup global. Nada aqui √© reinstala√ß√£o. Nada aqui √© gambiarra.

---

## REGRA DE OURO (LEIA ISSO UMA VEZ)

- ‚ùå Voc√™ **n√£o altera c√≥digo** para trocar ambiente
- ‚ùå Voc√™ **n√£o cria projetos diferentes** para DEV / TEST / PROD
- ‚ùå Voc√™ **n√£o muda application.yml por ambiente**
- ‚úÖ Voc√™ roda **o mesmo projeto** mudando **apenas vari√°veis**

Ambiente ‚â† c√≥digo.

---

## 1. ONDE TODO PROJETO DEVE MORAR (SEMPRE IGUAL)

Todos os projetos Spring Boot devem ficar **dentro do WSL**, no caminho:

```
/home/rodolfo/dev/projects

```

Nunca rode projeto em `/mnt/c`.

---

## 2. DESCOMPACTAR UM PROJETO DO SPRING INITIALIZR

### Passo 1 ‚Äî ir para a pasta de projetos

```bash
cd /home/rodolfo/dev/projects

```

### Passo 2 ‚Äî descompactar o ZIP vindo do Windows

```bash
unzip /mnt/c/Users/rodol/Downloads/meu-projeto.zip

```

### Passo 3 ‚Äî entrar no projeto e ajustar permiss√µes

```bash
cd meu-projeto
chmod +x gradlew

```

Pronto. O projeto est√° no lugar certo.

---

## 3. CRIAR OS BANCOS PARA CADA AMBIENTE (UMA VEZ)

Para **cada projeto**, voc√™ cria **um banco para cada ambiente**. Isso √© feito **uma √∫nica vez**.

### 3.1 Entrar no PostgreSQL

```bash
sudo -u postgres psql

```

### 3.2 Criar o banco

A regra √© simples:

üëâ **mesmo nome base**, sufixos diferentes por ambiente.

```sql
CREATE DATABASE nome_do_banco_dev; (desenvolvimento)
CREATE DATABASE nome_do_banco_test; (testes)
CREATE DATABASE nome_do_banco_prod; (produ√ß√£o)

```

Exemplo real:

```sql
CREATE DATABASE teste_dev;

```

### 3.3 Conferir

```sql
\l

```

### 3.4 Sair

```sql
\q

```

---

## 4. O √öNICO `application.yml` (COPIAR IGUAL EM TODO PROJETO)

Este arquivo **n√£o muda entre projetos** nem entre ambientes.

`src/main/resources/application.yml`

```yaml
spring:
  application:
    name: ${APP_NAME:app}

  datasource:
    url: "jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}"
    username: ${DB_USER}
    password: ${DB_PASSWORD}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

server:
  port: ${SERVER_PORT:8080}

```

Nunca coloque valores fixos aqui.

---

## 5. O QUE REALMENTE MUDA DE PROJETO PARA PROJETO

Somente **nomes**.

Antes de rodar o projeto:

```bash
export APP_NAME=nome-do-projeto
export DB_NAME=nome_do_banco

```

Exemplo:

```bash
export APP_NAME=teste
export DB_NAME=teste_dev

```

---

## 6. COMO TROCAR DE AMBIENTE (SEM MEXER NO C√ìDIGO)

Nesta se√ß√£o voc√™ **n√£o edita arquivos**, **n√£o renomeia projeto** e **n√£o copia c√≥digo**.

Voc√™ apenas **define vari√°veis no terminal** e executa o projeto.

> üìç Sempre esteja dentro da pasta do projeto antes de tudo:
> 
> 
> ```bash
> cd /home/rodolfo/dev/projects/meu-projeto
> 
> ```
> 

---

### DEV (ambiente de desenvolvimento)

**Objetivo:** rodar o projeto localmente, banco de desenvolvimento, mudan√ßas r√°pidas.

**Passo 1 ‚Äî definir o perfil ativo**

```bash
export SPRING_PROFILES_ACTIVE=dev

```

Isso diz ao Spring: *‚Äúestou rodando em DEV‚Äù*.

**Passo 2 ‚Äî apontar para o banco de DEV**

```bash
export DB_NAME=teste_dev

```

Aqui voc√™ escolhe **qual banco** o projeto vai usar.

**Passo 3 ‚Äî subir a aplica√ß√£o**

```bash
./gradlew bootRun

```

‚úî Resultado esperado:

- Aplica√ß√£o sobe
- Usa banco `teste_dev`
- Porta padr√£o 8080

---

### TEST (ambiente de testes)

**Objetivo:** testar integra√ß√£o, dados isolados, simular cen√°rios sem afetar DEV.

**Passo 1 ‚Äî trocar o perfil**

```bash
export SPRING_PROFILES_ACTIVE=test

```

**Passo 2 ‚Äî trocar o banco**

```bash
export DB_NAME=teste_test

```

**Passo 3 ‚Äî subir a aplica√ß√£o**

```bash
./gradlew bootRun

```

‚úî Resultado esperado:

- Mesmo c√≥digo
- Mesmo projeto
- Banco diferente (`teste_test`)

---

### PROD (ambiente de produ√ß√£o)

**Objetivo:** rodar aplica√ß√£o como seria em servidor real.

Aqui muda **apenas a forma de subir**, n√£o o c√≥digo.

**Passo 1 ‚Äî definir perfil PROD**

```bash
export SPRING_PROFILES_ACTIVE=prod

```

**Passo 2 ‚Äî apontar para banco de produ√ß√£o**

```bash
export DB_NAME=teste_prod

```

**Passo 3 ‚Äî gerar o JAR**

```bash
./gradlew clean build

```

Isso cria o artefato final em `build/libs/`.

**Passo 4 ‚Äî rodar como produ√ß√£o**

```bash
java -jar build/libs/*.jar

```

‚úî Resultado esperado:

- Aplica√ß√£o rodando via JAR
- Banco `teste_prod`
- Mesmo application.yml

---

## 8. Adicionar Vari√°veis de Ambiente no IntellJ

DB_HOST=localhost;DB_PORT=5432;DB_USER=rodolfo;DB_PASSWORD=9951;DB_NAME=
